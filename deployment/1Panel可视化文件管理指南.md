# 1Panel可视化文件管理指南

> **适用场景**: 通过1Panel Web界面上传和管理H5静态文件  
> **优势**: 无需SSH命令，全程可视化操作

---

## 📋 目录

1. [方法对比](#一方法对比)
2. [通过1Panel上传文件](#二通过1panel上传文件)
3. [文件管理操作](#三文件管理操作)
4. [常见问题](#四常见问题)

---

## 一、方法对比

### 方法1：SSH命令行上传（已使用）

**优点**：

- ✅ 速度快，适合大文件
- ✅ 可以批量操作
- ✅ 适合自动化脚本

**缺点**：

- ❌ 需要熟悉命令行
- ❌ 需要安装SSH工具

**适用场景**：开发者、频繁更新

---

### 方法2：1Panel可视化上传（推荐新手）

**优点**：

- ✅ 全程可视化，无需命令行
- ✅ 支持拖拽上传
- ✅ 可以在线编辑文件
- ✅ 支持文件预览

**缺点**：

- ❌ 上传速度相对较慢
- ❌ 浏览器限制文件大小

**适用场景**：新手用户、小文件更新

---

## 二、通过1Panel上传文件

### 步骤1：进入文件管理

1. 登录1Panel面板（http://47.239.179.9:8090）
2. 在左侧菜单点击 **「网站」**
3. 找到您创建的网站
4. 点击网站目录列的 **文件夹图标** 📁

### 步骤2：清空旧文件（如果需要）

1. 进入文件管理界面后，可以看到当前目录的所有文件
2. 如果需要完全替换，可以：
   - 全选所有文件（Ctrl+A 或点击全选框）
   - 点击 **「删除」** 按钮
   - 确认删除

**提示**：建议先备份，可以重命名目录而不是删除

### 步骤3：上传H5文件

#### 方法A：直接上传文件夹（推荐）

1. 在本地电脑，将 `D:\ai\手链运势\apps\wx-app\dist\build\h5` 目录压缩成 `h5.zip`
2. 在1Panel文件管理界面，点击 **「上传」** 按钮
3. 选择 `h5.zip` 文件
4. 等待上传完成（进度条显示）
5. 上传完成后，右键点击 `h5.zip`
6. 选择 **「解压」**
7. 选择解压到当前目录
8. 解压完成后，删除 `h5.zip`

#### 方法B：拖拽上传

1. 在本地电脑打开 `D:\ai\手链运势\apps\wx-app\dist\build\h5` 目录
2. 选中所有文件和文件夹
3. 直接拖拽到1Panel文件管理界面
4. 等待上传完成

**注意**：

- 拖拽上传可能不支持文件夹结构，建议使用压缩包方式
- 单个文件不要超过100MB

### 步骤4：验证文件结构

上传完成后，确认目录结构正确：

```
/home/xiaoyi-dev1/h5-web/
├── index.html          ← 必须在根目录
├── assets/
│   └── (各种资源文件)
└── static/
    └── (静态文件)
```

**重要**：`index.html` 必须在网站根目录，不能在子目录中！

---

## 三、文件管理操作

### 1. 在线编辑文件

如果需要修改某个文件（如修改API地址）：

1. 在文件列表中找到要编辑的文件
2. 点击文件名或右键选择 **「编辑」**
3. 在线编辑器中修改内容
4. 点击 **「保存」** 按钮

**适用场景**：

- 修改配置文件
- 调试HTML/CSS/JS
- 快速修复小问题

### 2. 文件预览

1. 点击文件名
2. 支持预览的文件类型：
   - 图片（jpg、png、gif、svg）
   - 文本文件（txt、md、json）
   - 代码文件（js、css、html）

### 3. 下载文件

1. 选中要下载的文件
2. 点击 **「下载」** 按钮
3. 文件会下载到本地电脑

**用途**：备份文件、下载日志

### 4. 重命名/移动

1. 右键点击文件或文件夹
2. 选择 **「重命名」** 或 **「移动」**
3. 输入新名称或选择目标目录

### 5. 设置权限

1. 右键点击文件或文件夹
2. 选择 **「权限」**
3. 设置读写执行权限
4. 建议设置为 `755`（rwxr-xr-x）

### 6. 压缩/解压

**压缩**：

1. 选中要压缩的文件/文件夹
2. 点击 **「压缩」** 按钮
3. 选择压缩格式（zip、tar.gz）
4. 输入压缩包名称

**解压**：

1. 右键点击压缩包
2. 选择 **「解压」**
3. 选择解压目录

---

## 四、常见问题

### 问题1：上传后网站显示404

**原因**：index.html不在根目录

**解决**：

1. 检查文件结构
2. 如果index.html在子目录（如h5/index.html）：
   - 进入h5目录
   - 全选所有文件
   - 点击「移动」
   - 移动到上级目录（..）
   - 删除空的h5目录

### 问题2：上传速度很慢

**原因**：

- 文件太大
- 网络不稳定

**解决**：

1. 先压缩成zip再上传
2. 分批上传（先上传小文件，再上传大文件）
3. 使用SSH命令行上传（更快）

### 问题3：无法上传大文件

**原因**：浏览器或1Panel限制文件大小

**解决**：

1. 压缩文件减小体积
2. 使用SSH命令行上传
3. 修改1Panel上传限制（需要管理员权限）

### 问题4：解压后文件权限错误

**原因**：解压后权限可能不正确

**解决**：

```bash
# SSH连接到服务器
ssh xiaoyi-dev1@47.239.179.9 -p 43122

# 修改权限
chmod -R 755 /home/xiaoyi-dev1/h5-web/
```

或在1Panel中：

1. 全选所有文件
2. 右键选择「权限」
3. 设置为755

---

## 五、最佳实践

### 推荐工作流程

1. **首次部署**：使用SSH命令行上传（快速）
2. **小改动**：使用1Panel在线编辑（方便）
3. **大更新**：使用SSH命令行上传（稳定）

### 文件备份建议

在更新文件前，建议先备份：

**方法1：在1Panel中备份**

1. 选中整个网站目录
2. 点击「压缩」
3. 命名为：`h5-web-backup-20251114.zip`
4. 下载到本地

**方法2：在服务器上备份**

```bash
cd ~
cp -r h5-web h5-web-backup-$(date +%Y%m%d-%H%M%S)
```

### 安全建议

1. **不要在1Panel中存储敏感信息**（如密码、密钥）
2. **定期备份重要文件**
3. **上传前检查文件内容**（避免上传错误文件）
4. **使用HTTPS访问1Panel**（保护登录信息）

---

## 六、对比总结

| 操作     | SSH命令行  | 1Panel可视化 |
| -------- | ---------- | ------------ |
| 上传速度 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐       |
| 易用性   | ⭐⭐       | ⭐⭐⭐⭐⭐   |
| 批量操作 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐       |
| 在线编辑 | ❌         | ✅           |
| 文件预览 | ❌         | ✅           |
| 适合新手 | ❌         | ✅           |

---

**建议**：

- 新手用户：优先使用1Panel可视化管理
- 开发者：结合使用SSH和1Panel，各取所长

---

**文档版本**: v1.0  
**更新时间**: 2025-11-14
