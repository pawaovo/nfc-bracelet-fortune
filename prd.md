# “专属NFC手链运势”微信小程序 Product Requirements Document (PRD)

## 1. 目标和背景

### 1.1 目标

- [cite_start]**战略目标**: 打造一款深度整合实体 NFC 手链与线上个性化运势服务的微信小程序，将一次性的商品购买行为升级为持续的用户互动与服务体验。在 V1.0 版本实现包含用户账户、NFC 绑定、历史运势追溯的完整功能闭环 [cite: 4]。
- [cite_start]**用户目标**: 为用户提供独一无二的“一触即达”专属运势服务，增强产品的仪式感与价值感 [cite: 7]。
- [cite_start]**商业目标**: 通过小程序独特的服务体验吸引用户，最终将流量导向抖音店铺，提升手链销量 [cite: 8]。

### 1.2 背景

[cite_start]当前市场存在许多运势、占卜类应用，但多为纯线上体验。本项目旨在通过 NFC 技术，将实体手链与个性化的数字内容相结合，创造独特的“专属感”和“仪式感” [cite: 4][cite_start]。用户通过手机触碰 NFC 手链即可快速启动小程序并获取当日专属运势 [cite: 7][cite_start]，这种便捷的交互方式是产品的核心差异点。目标用户是对星座、玄学感兴趣，追求生活仪式感和个性化体验的年轻都市人群 [cite: 14, 15][cite_start]，他们习惯在抖音等社交媒体平台消费和购物 [cite: 17][cite_start]。小程序不仅提供运势内容，还承担着引导用户前往抖音店铺购买手链的关键转化任务 [cite: 8]。

### 1.3 Change Log

| Date           | Version | Description                              | Author |
| :------------- | :------ | :--------------------------------------- | :----- |
| 2025年10月24日 | 0.1     | 初稿，定义目标与背景                     | PM     |
| 2025年10月24日 | 0.2     | 添加 Story 1.0 用于项目初始化            | PM     |
| 2025年10月24日 | 0.3     | 更新 Story 1.0 加入 DB, CI/CD, Seed 任务 | PM     |
| 2025年10月24日 | 0.4     | 更新未来规划 V1.1 加入用户反馈渠道       | PM     |

---

## 2. 需求

### 2.1 功能需求 (FR)

- [cite_start]**FR1: 用户账户系统**: 系统需支持基于微信 OpenID 的用户账户体系 [cite: 139]。
- **FR2: NFC 手链绑定**:
  - [cite_start]FR2.1: 支持用户首次通过 NFC 触碰未绑定的手链时，拉起小程序并引导完成微信授权和绑定流程 [cite: 55, 56, 130]。
  - [cite_start]FR2.2: 后台需建立微信 OpenID 与手链 NFC ID 的唯一绑定关系 [cite: 63, 139]。
  - FR2.3: 绑定关系一旦建立，不可解除。
  - FR2.4: 支持用户绑定多个手链；无论通过哪个已绑定的手链进入，均展示用户的相同运势信息。
- **FR3: 个人信息收集**:
  - [cite_start]FR3.1: 首次绑定成功后，或新访客直接打开授权后，引导用户输入“称呼”（姓名）和“生日”（公历）信息 [cite: 65, 66, 100, 101, 149]。
  - [cite_start]FR3.2: 后台需存储用户输入的称呼和生日信息，用于后续运势计算 [cite: 67, 162]。
- **FR4: 每日运势展示**:
  - [cite_start]FR4.1: 已认证用户（已绑定手链）通过 NFC 触碰**自己**的手链或直接打开小程序时，应能自动识别身份（静默登录）并直接展示**完整版**的每日运势结果页 [cite: 70, 71, 72, 78, 81, 82, 88, 90, 168]。
  - [cite_start]FR4.2: 完整版运势应包含：综合分数、一句话点评、分项运势（如事业、财富、爱情，形式如图所示）、开运提示（如喜用、幸运色、宜）等详细信息 [cite: 171, 175, 176, 283-287]。
  - [cite_start]FR4.3: 新访客（未绑定手链）直接打开小程序，在输入个人信息后，应展示**访客版**每日运势，仅清晰显示“综合分数”，其他详细运势内容进行模糊或遮挡处理 [cite: 95, 101-103, 165, 182, 184, 187-189, 295, 300-302]。
  - [cite_start]FR4.4: 每日运势结果页需显示当天日期 [cite: 171, 183, 281]。
- **FR5: 历史运势追溯**:
  - [cite_start]FR5.1: 已认证用户可在每日运势结果页找到“查看历史”入口 [cite: 171, 179, 201, 289]。
  - [cite_start]FR5.2: 提供历史运势列表页，展示用户过往每日的运势记录（至少包含日期和综合分数） [cite: 198, 200, 204, 205, 313, 314]。
  - [cite_start]FR5.3: 用户可点击历史列表中的某一天，跳转回结果页查看当日的完整历史运势数据 [cite: 206, 315]。
  - [cite_start]FR5.4: 新访客的历史记录入口置灰或隐藏 [cite: 195, 295]。
- **FR6: 购买引导 (转化)**:
  - [cite_start]FR6.1: 新访客的运势结果页需在模糊区域 prominently 展示引导购买手链以解锁完整内容的模块和按钮 [cite: 95, 104, 105, 182, 190-192, 295, 303, 304]。
  - [cite_start]FR6.2: 运势结果页底部为所有用户提供“去抖音店铺看看”的按钮。对于新访客，此按钮文案可强化为“购买手链，解锁完整运势” [cite: 171, 181, 183, 197, 294, 307]。
  - FR6.3: 点击购买引导相关按钮后，应复制抖音店铺链接到用户剪贴板，并给出提示。
- **FR7: 边界情况处理 (触碰他人手链)**:
  - FR7.1: 当用户 A（无论是否已绑定自己的手链）触碰用户 B 的**已绑定**手链时，后台检测到 NFC ID 已绑定但与当前用户 A 的微信 ID 不匹配。
  - FR7.2: 在 FR7.1 的情况下，向用户 A 展示**访客版**运势预览（仅总分可见）。
  - FR7.3: 在 FR7.1 的情况下，页面需引导用户 A 购买自己的手链。
  - FR7.4: 当用户 A 触碰一个**未被绑定**的手链时，应触发 FR2.1 的新用户绑定流程。
- **FR8: 开运手链推荐**:
  - [cite_start]FR8.1: 在每日运势结果页（包括访客版和完整版）展示“今日开运手链推荐”模块 [cite: 171, 180, 183, 196, 290]。
  - [cite_start]FR8.2: 推荐模块包含手链图片、名称和推荐语 [cite: 171, 183, 291-293]。
  - FR8.3: 推荐逻辑基于后台设定的规则（例如，根据用户当日运势分数范围推荐不同手链）。后台应支持配置手链库及推荐规则。

### 2.2 非功能需求 (NFR)

- **NFR1: 性能**:
  - [cite_start]NFR1.1: NFC 拉起小程序的响应时间应在 2 秒以内 [cite: 243]。
  - [cite_start]NFR1.2: 各主要页面加载时间应在 3 秒以内 [cite: 244]。
  - [cite_start]NFR1.3: 后端 API 接口平均响应时间应在 200 毫秒以内 [cite: 245]。
- **NFR2: 兼容性**:
  - [cite_start]NFR2.1: 兼容市面上主流的 iOS 和 Android 机型（具体列表待定）[cite: 247]。
  - [cite_start]NFR2.2: 兼容最新及近期主要版本的微信客户端 [cite: 248]。
- **NFR3: 安全性**:
  - [cite_start]NFR3.1: 所有用户敏感数据（特别是 OpenID、姓名、生日）在传输和存储时必须进行加密处理 [cite: 250]。
  - [cite_start]NFR3.2: NFC 芯片 ID 与用户微信 OpenID 的绑定关系需有防篡改机制，确保不被恶意解绑或修改 [cite: 251]。
  - NFR3.3: 运势计算相关的个人信息（姓名、生日）不应泄露给其他用户。
- **NFR4: 稳定性**:
  - [cite_start]NFR4.1: 小程序线上服务可用性需达到 99.9% [cite: 253]。
- **NFR5: 技术栈**:
  - NFR5.1: 后端数据库采用自建服务器部署的 PostgreSQL。
  - NFR5.2: 如需 AI 模型能力（例如运势文本生成或分析），应使用 OpenAI 兼容协议的 API (如 OpenAI API, DeepSeek API)。
  - NFR5.3: 小程序基于 uni-app 框架开发，目标平台为微信小程序。 _(注：uni-app 是后续架构阶段确定的)_
- **NFR6: 可维护性**:
  - NFR6.1: 代码应遵循良好的编程规范，易于理解和维护。
  - NFR6.2: 后台应提供配置能力，如手链库管理、运势推荐规则配置等。

---

## 3. 用户界面设计目标

整体 UI/UX 设计需围绕以下核心目标和原则：

- [cite_start]**简洁直观**: 界面操作应简单明了，特别是核心的 NFC 触碰获取运势流程，需做到极致的便捷 [cite: 7, 71]。
- [cite_start]**专属感与仪式感**: 通过视觉设计（参考截图风格：深色背景、星空/神秘元素）和交互流程（如首次绑定欢迎页），营造用户专属、独特的体验 [cite: 7, 129, 264]。
- [cite_start]**清晰的信息层级**: 运势结果页需重点突出核心信息（如综合分数） [cite: 188, 284, 301][cite_start]，同时保证其他信息的易读性（对已认证用户） [cite: 172, 279]。
- [cite_start]**差异化体验**: 明确区分已认证用户和新访客的界面展示 [cite: 165, 170, 182, 277][cite_start]，访客视图的设计需有效引导购买转化 [cite: 182, 190-192, 197, 295, 303, 304, 307]。
- **一致性**: 保持小程序内不同页面的视觉风格和交互模式统一。
- [cite_start]**微信小程序规范**: 遵循微信小程序的设计规范和最佳实践 [cite: 248]。

[cite_start]**详细页面元素和内容布局**: 请参考《“专属NFC手链运势”微信小程序- 页面内容设计清单》文档 [cite: 1-55] 及提供的 UI 视觉参考图。

---

## 4. 技术假设

在产品需求阶段，基于项目目标和特定要求，做出以下初步技术假设，以指导后续的架构设计：

- **后端数据库**: 核心业务数据将存储在 **PostgreSQL** 数据库中。该数据库将部署在**自建服务器**上。
- **AI 能力接口**: 如需运势内容生成、分析或其他 AI 功能，将通过 API 调用 **OpenAI 兼容协议的模型服务**（如 OpenAI API 或 DeepSeek API）来实现。具体模型选型和 API 提供商可在技术设计阶段确定。
- **前端平台**: 应用将作为**微信小程序**开发和发布。 _(后续确定使用 uni-app 框架)_
- **开发语言与框架**: （待定）具体的前后端开发语言和框架将在技术架构设计阶段确定，需考虑微信小程序生态、PostgreSQL 交互以及 API 对接的便利性。 _(后续确定为 uni-app(Vue3+TS) + NestJS)_
- **部署与运维**: （待定）应用的具体部署方案（服务器配置、容器化方案等）和运维策略将在后续阶段确定。自建 PostgreSQL 数据库的运维需纳入考虑。

[cite_start]**注**: 以上假设为初步选型，可能在技术设计或开发过程中根据实际情况进行调整。所有技术选型需优先满足非功能需求中关于性能、安全、稳定性的要求 [cite: 241-253]。

---

## 5. 史诗 (Epic) 和故事 (Story) 结构

### Epic 1: 核心用户绑定与运势体验

**史诗目标**: 建立项目基础，实现新用户通过 NFC 绑定手链、补全信息，以及已绑定用户顺畅查看完整每日运势的核心流程。

**用户故事**:

**Story 1.0: 项目初始化与基础设置 (Enabler)**

- **作为一个** 开发团队成员，
- **我想要** 初始化项目结构、配置开发环境、设置版本控制、配置基础数据库和 CI/CD 流水线，并准备初始商品数据与外部服务凭证，
- **以便** 为后续的功能开发奠定坚实的基础。
- **验收标准 (AC)**:
  1.  项目代码库已基于选定的 uni-app starter template (Vue3+Vite+TS) 正确创建。
  2.  项目已按照架构文档定义的 Monorepo 结构 (使用 pnpm workspaces) 进行组织 (`apps/wx-app`, `apps/api`, `packages/shared-types` 等目录已创建)。
  3.  运行 `pnpm install` 后，所有在技术栈 中定义的核心依赖均已正确安装到相应的 `package.json` 文件中。
  4.  Git 仓库已初始化，包含一个合适的 `.gitignore` 文件，并且项目的初始状态已作为首次提交 (`Initial commit`) 推送到远程仓库。
  5.  项目根目录下存在一个基础的 `README.md` 文件，包含项目简介、技术栈列表、**必要的外部服务凭证准备说明 (微信 AppID/Secret, AI API Key)**、以及本地开发环境启动说明（包括数据库启动说明和前后端启动命令）。
  6.  前后端开发服务器可以通过 `package.json` 中定义的脚本命令成功启动。
  7.  ESLint 和 Prettier 已配置在 Monorepo 根目录，并通过 `husky` 和 `lint-staged` 配置为在提交前自动检查/格式化代码。
  8.  本地开发环境的 PostgreSQL 数据库可以通过 Docker Compose (`docker-compose up -d`) 或类似脚本轻松启动和连接。后端 API 服务的 `.env.example` 文件已包含连接本地数据库所需的变量。
  9.  基础的 CI/CD 流水线 (例如 GitHub Actions 或 GitLab CI) 已配置，至少包含代码检出、依赖安装、Lint 检查和单元测试（前后端）阶段。
  10. `products` 表的种子数据脚本已创建 (例如，使用 Prisma Seed)，并包含至少 3-5 条示例手链商品数据（含名称、描述、图片 URL 占位符、抖音链接占位符），可以通过命令 (`pnpm --filter api prisma db seed`) 执行填充。

- **Dev Notes (新增/提示)**:
  - **外部服务准备**: 在开始开发前，确保已从微信公众平台获取小程序的 AppID 和 AppSecret，并从选定的 OpenAI 兼容 API 服务商获取 API Key。这些凭证将用于本地 `.env` 文件配置。

**Story 1.1: NFC 首次绑定与授权**

- **作为一个** 首次使用的新用户，
- **我想要** 通过手机触碰新手链，
- **以便** 可以拉起小程序并完成微信授权和手链绑定，开启我的专属运势体验。
- **验收标准 (AC)**:
  1.  当手机触碰一个**未绑定**的 NFC 手链时，能自动拉起本小程序。
  2.  小程序启动后，展示“欢迎与绑定页”。
  3.  [cite_start]“欢迎与绑定页”包含指定的欢迎文案、手链示意图/图标、以及“微信授权并绑定”按钮 [cite: 8, 186-189]。
  4.  点击“微信授权并绑定”按钮后，正确触发微信授权流程。
  5.  [cite_start]微信授权成功时，后台能成功获取用户微信 OpenID，并将其与当前手链的 NFC ID 建立唯一的绑定关系 [cite: 117-119, 192-194]。
  6.  绑定成功后，页面自动跳转至“个人信息补全页”。
  7.  若微信授权失败，应停留在“欢迎与绑定页”并给出用户友好的提示。

**Story 1.2: 个人信息补全**

- **作为一个** 刚完成绑定的用户，
- **我想要** 在信息补全页输入我的称呼和生日，
- **以便** 提交并保存这些信息，让系统为我生成个性化的运势。
- **验收标准 (AC)**:
  1.  从绑定流程成功完成后，正确展示“个人信息补全页”。
  2.  [cite_start]“个人信息补全页”包含指定的引导文案、称呼输入框、生日选择器（公历）、以及“开启我的好运”提交按钮 [cite: 15, 208-213]。
  3.  [cite_start]称呼输入框具有指定的标签“称呼”和占位符文字“请输入你的常用称呼” [cite: 13]。
  4.  [cite_start]生日选择器具有指定的标签“生日”、占位符文字“请选择你的生日”和日历图标，点击后能弹出日期选择控件供用户选择公历生日 [cite: 14]。
  5.  [cite_start]点击“开启我的好运”按钮时，前端对“称呼”和“生日”进行非空校验 [cite: 216]。
  6.  [cite_start]校验通过后，将用户输入的“称呼”和选择的“生日”数据发送给后端，后端成功将其与当前用户账户关联并保存 [cite: 217]。
  7.  [cite_start]信息保存成功后，页面自动跳转至“每日运势结果页” [cite: 218]。
  8.  若信息保存失败，应停留在当前页并给出相应提示。

**Story 1.3: 已认证用户 - NFC 触碰查看运势 (核心体验)**

- **作为一个** 已绑定手链的用户，
- **我想要** 通过手机触碰我的手链，
- [cite_start]**以便** 可以直接、快速地看到我当天的完整专属运势，体现手链的价值感和便捷性 [cite: 125, 126]。
- **验收标准 (AC)**:
  1.  [cite_start]当已认证用户使用手机触碰**自己已绑定**的任一手链时，小程序能自动启动 [cite: 127, 128]。
  2.  [cite_start]后台能通过传入的 NFC ID 准确识别用户身份，并完成静默登录流程 [cite: 130, 131, 132]。
  3.  [cite_start]无需用户进行任何点击或输入操作，直接跳转并展示**完整版**的“每日运势结果页” [cite: 133, 134]。
  4.  [cite_start]完整版结果页顶部正确显示当天日期（例如：“2025年10月24日”） [cite: 21, 226]。
  5.  [cite_start]结果页显示个性化欢迎语，格式为：“[用户称呼], 这是你的专属运势” [cite: 22, 226]。
  6.  [cite_start]结果页清晰、突出地展示当日“综合分数”，例如“综合分数：88分” [cite: 24, 226]。
  7.  [cite_start]结果页展示一句话的运势点评 [cite: 25, 226]。
  8.  [cite_start]结果页使用星级或其他可视化方式清晰展示各项分项运势（事业运、财富运、爱情运） [cite: 26, 226]。
  9.  [cite_start]结果页清晰展示开运提示文字（今日喜用、幸运色、宜） [cite: 27, 226]。
  10. [cite_start]页面加载迅速，NFC 拉起至展示结果页的总时长应符合 NFR1.1 的要求 (小于 2 秒) [cite: 298]。

**Story 1.4: 已认证用户 - 直接打开查看运势**

- **作为一个** 已绑定手链的用户，
- **我想要** 直接从微信列表打开小程序时，
- [cite_start]**以便** 也能自动识别我的身份并直接看到当天的完整运势，方便在不使用 NFC 时查看 [cite: 136]。
- **验收标准 (AC)**:
  1.  [cite_start]已认证用户从微信中直接打开小程序时，小程序能正常启动 [cite: 137, 138]。
  2.  [cite_start]系统能通过微信 OpenID 查询用户身份，并识别为已认证用户，完成静默登录 [cite: 140-143]。
  3.  [cite_start]无需用户进行任何点击或输入操作，直接跳转并展示**完整版**的“每日运势结果页” [cite: 144, 145]。
  4.  [cite_start]完整版结果页展示的内容（日期、欢迎语、综合分数、点评、分项运势、开运提示）与 Story 1.3 的 AC 4-9 完全一致 [cite: 21, 22, 24-27, 226, 229-231]。
  5.  [cite_start]页面加载迅速，符合 NFR1.2 的要求 (小于 3 秒) [cite: 299]。

### Epic 2: 新访客引导与购买转化

**史诗目标**: 优化未绑定手链的新访客体验，通过预览运势和清晰的购买引导，有效促使其前往抖音店铺购买手链，并展示相关的开运商品推荐。

**用户故事**:

**Story 2.1: 新访客 - 直接打开与信息输入**

- **作为一个** 对小程序感兴趣但没有手链的新访客，
- **我想要** 在直接打开小程序时，被引导输入我的称呼和生日信息，
- [cite_start]**以便** 可以获取我的运势预览 [cite: 149, 150]。
- **验收标准 (AC)**:
  1.  [cite_start]当未绑定手链的用户首次直接打开小程序时，小程序能正常启动 [cite: 151, 152]。
  2.  [cite_start]系统检测到用户为未绑定用户，引导进行微信授权 [cite: 153, 154]。
  3.  [cite_start]微信授权成功后，跳转至“个人信息补全页” [cite: 155]。
  4.  [cite_start]“个人信息补全页”的展示和信息输入、保存流程与 Story 1.2 的 AC 2-8 完全一致 [cite: 156, 204-218]。
  5.  [cite_start]信息保存成功后，页面跳转至**访客版**“每日运势结果页” [cite: 157, 158]。

**Story 2.2: 新访客 - 查看运势预览与购买引导**

- **作为一个** 已输入信息但未绑定手链的新访客，
- **我想要** 在运势结果页看到我的综合分数，并清晰地看到购买手链以解锁完整内容的引导，
- [cite_start]**以便** 我了解产品价值并被引导去购买 [cite: 149, 150]。
- **验收标准 (AC)**:
  1.  [cite_start]从信息补全页成功提交后，正确展示**访客版**的“每日运势结果页” [cite: 157, 158]。
  2.  [cite_start]访客版结果页顶部正确显示当天日期 [cite: 38, 238]。
  3.  [cite_start]结果页显示访客版欢迎语，格式为：“[用户称呼], 这是你的运势预览” [cite: 39, 238]。
  4.  [cite_start]结果页清晰、突出地展示当日“综合分数”，例如“综合分数：88分” [cite: 41, 238]。
  5.  [cite_start]除综合分数外，页面的其他运势详情区域（如一句话点评、分项运势、开运提示）均进行模糊处理或使用锁图标遮挡，用户无法看清具体内容 [cite: 42, 244]。
  6.  [cite_start]在模糊/遮挡区域显著位置，展示一个醒目的引导模块，包含引导文案（如：“购买专属NFC手链，即可解锁全部运势、历史记录和更多专属功能！”）和一个引导按钮（如：“前往解锁”） [cite: 43, 44, 238, 245-247]。
  7.  点击“前往解锁”按钮，执行与 Story 2.3 的 AC 5-6 相同的操作（复制抖音链接并提示）。

**Story 2.3: 商品推荐与跳转抖音店铺**

- **作为一个** 小程序用户（无论是否已认证），
- **我想要** 在每日运势结果页看到推荐的开运手链，并能方便地跳转（复制链接）到抖音店铺查看或购买，
- **以便** 发现可能适合我的开运商品并完成购买转化。
- **验收标准 (AC)**:
  1.  [cite_start]在每日运势结果页（访客版和完整版）下方，正确展示“今日开运手链推荐”模块 [cite: 30, 45, 226, 238]。
  2.  [cite_start]推荐模块包含手链图片、手链名称（如：“蓝宝石手链”）和一句话推荐语（如：“五行属水，完美契合...”） [cite: 32, 33, 226, 238]。
  3.  推荐模块的手链数据来源于后台的手链库，并根据后台配置的规则进行展示。
  4.  [cite_start]模块下方包含一个行动号召按钮，对于已认证用户，文案为“去抖音店铺看看” [cite: 34, 226][cite_start]；对于新访客，文案强化为“购买手链，解锁完整运势” [cite: 47, 238]。
  5.  点击此按钮后，成功将后台配置的抖音店铺链接复制到用户剪贴板。
  6.  复制成功后，小程序应给出明确的提示信息，告知用户链接已复制，可前往抖音 App 打开。

### Epic 3: 历史回顾与边界处理

**史诗目标**: 为已认证用户提供回顾历史运势的功能，并妥善处理用户触碰他人手链（已绑定或未绑定）的各种边界情况。

**用户故事**:

**Story 3.1: 查看历史运势列表**

- **作为一个** 已认证用户，
- **我想要** 在每日运势结果页找到并进入“历史记录”页面，
- **以便** 可以浏览我过去每天的运势概览。
- **验收标准 (AC)**:
  1.  [cite_start]已认证用户的“每日运势结果页”上存在一个清晰可见的“查看历史”入口/按钮 [cite: 29, 226, 234]。
  2.  [cite_start]新访客的“每日运势结果页”上，“查看历史”入口/按钮应置灰或隐藏 [cite: 250]。
  3.  [cite_start]点击“查看历史”入口后，页面跳转至“历史运势列表页” [cite: 256]。
  4.  [cite_start]“历史运势列表页”的页面标题为“我的运势足迹” [cite: 51, 258]。
  5.  [cite_start]页面包含一个可返回“每日运势结果页”的按钮或操作方式 [cite: 52]。
  6.  [cite_start]页面展示一个可上下滚动的列表，按日期倒序排列用户的历史运势记录 [cite: 53, 259]。
  7.  [cite_start]列表中的每一行至少包含日期（如“YYYY-MM-DD”）和当日的综合分数（如“综合: XX分”）[cite: 54, 260]。 (可选补充信息：一句话点评或关键词)。
  8.  [cite_start]列表支持无限滚动或分页加载，以处理大量历史数据，并有加载状态提示 [cite: 259]。

**Story 3.2: 查看特定日期的历史运势详情**

- **作为一个** 已认证用户，
- **我想要** 在历史运势列表页点击任意一条记录，
- [cite_start]**以便** 可以跳转回结果页查看那一天的完整运势详情 [cite: 55, 261]。
- **验收标准 (AC)**:
  1.  [cite_start]“历史运势列表页”中的每一行记录都是可点击的 [cite: 55]。
  2.  [cite_start]点击列表中的某一行后，页面跳转回“每日运势结果页” [cite: 261]。
  3.  [cite_start]跳转后的“每日运势结果页”展示的是用户所点击日期的**历史**运势数据，而不是当天的数据 [cite: 261]。
  4.  页面顶部显示的日期应为所选历史日期。
  5.  页面展示的欢迎语、综合分数、一句话点评、分项运势、开运提示等，均应为所选历史日期的数据。
  6.  在展示历史数据的“每日运势结果页”上，“查看历史”按钮的功能应调整为返回历史列表页，或提供其他返回路径。

**Story 3.3: 处理触碰他人已绑定手链**

- **作为一个** 用户（无论是否已认证），
- **我想要** 在触碰**他人已绑定**的手链时，看到一个受限的运势预览并被引导购买我自己的手链，
- [cite_start]**以便** 保护他人隐私的同时，也给我一个了解和购买产品的机会 [cite: 164, 165]。
- **验收标准 (AC)**:
  1.  [cite_start]当用户 A 使用手机触碰用户 B 的**已绑定**手链时，小程序能自动启动 [cite: 166, 167]。
  2.  后台能检测到传入的 NFC ID 已被绑定，但该 ID 关联的微信 OpenID 与当前用户 A 的微信 OpenID 不匹配 (`POST /api/v1/auth/login` 返回 `VISITOR_PREVIEW` 状态)。
  3.  在此情况下，小程序应直接展示**访客版**的“每日运势结果页”，且不需要用户输入个人信息。
  4.  [cite_start]访客版结果页的展示内容与 Story 2.2 的 AC 2-6 一致（显示日期、访客欢迎语、仅综合分数可见、其他内容模糊/遮挡、有醒目的购买引导模块） [cite: 38, 39, 41-44, 169, 170]。
  5.  [cite_start]页面底部的商品推荐模块及按钮的展示和功能与 Story 2.3 的 AC 1-6 针对新访客的部分一致（引导购买并复制抖音链接） [cite: 45-47, 171-173]。

**Story 3.4: 处理触碰未绑定手链**

- **作为一个** 用户（无论是否已认证），
- **我想要** 在触碰一个**未被绑定**的新手链时，被引导进入绑定流程，
- **以便** 我可以将这个新手链与我的微信账号绑定。
- **验收标准 (AC)**:
  1.  当任何用户（包括已绑定过其他手链的用户 A）使用手机触碰一个**未被绑定**的 NFC 手链时，小程序能自动启动。
  2.  后台检测到传入的 NFC ID 未被任何微信 OpenID 绑定。
  3.  在此情况下，小程序应直接触发新用户绑定流程，展示“欢迎与绑定页”，后续流程与 Story 1.1 的 AC 2-7 完全一致。

---

## 6. 未来规划

### 6.1 V1.1:

- [cite_start]**小程序内电商闭环**: 集成微信支付，用户可直接在小程序内完成购买，缩短转化路径 [cite: 311]。
- [cite_start]**用户手链库**: 用户可以”点亮”自己拥有的所有手链，系统推荐会更智能 [cite: 312]。
- **用户反馈渠道 (新增)**: 在小程序内增加一个简单的用户反馈入口（例如，“设置”页面内或专属反馈页面），允许用户提交文字意见或建议，便于收集用户声音和改进产品。

### 6.2 V2.0:

- [cite_start]**社交功能增强**: 增加好友运势 PK、情侣运势匹配等互动功能 [cite: 314]。
- [cite_start]**付费内容**: 引入更深度的付费运势解读服务（如年度运势报告） [cite: 315]。

---
